<!DOCTYPE html>
<html lang="en-AU">

<head>
    <meta charset="UTF-8">
    <title>Create a Character</title>

    <style>
        /* This is a particular way to do a grid layout. It involves creating sections as classes
        The sections contain the CSS for the class, including grid-area
        grid-area defines the part of the page the grid will take up within the grid container */
        .header {
            grid-area: header;
            background-color: aqua;
            text-align: center;
        }

        .general {
            grid-area: general;
            background-color: aquamarine;
        }

        .skills-header {
            grid-area: skills-header;
            background-color: salmon;
            text-align: center;
        }

        .first-skill-list {
            grid-area: 1stSList;
            background-color: chartreuse;
        }

        .second-skill-list {
            grid-area: 2ndSList;
            background-color: palevioletred;
        }

        .third-skill-list {
            grid-area: 3rdSList;
            background-color: peru;
        }

        .crush {
            grid-area: crush;
            background-color: rebeccapurple;
        }

        .display {
            grid-area: display;
            background-color: slategrey;
        }

        /* This is the CSS for the display panel on the right */
        .h1 {
            text-align: center;
        }

        /* This is the grid container. It is an implicit grid, meaning that the grid is not defined. 
It lays out the page according to grid-template-areas
Each line is a row, with the columns determined by the grid-area of the classes above 
This is very fragile. A mistake in the grid-template area will destroy the layout: 
The order of the divs in the html document is also important. 
To Be honest, I can think of no valid reason to use this format 
The columns are flexible in width, HOWEVER the textarea has been set at 250px of width, 
which creates a minimum size for the first three columns. */
        .page-container {
            display: grid;
            grid-template-areas:
                'header header header header header header'
                'general general general display display display'
                'skills-header skills-header skills-header display display display'
                '1stSList 2ndSList 3rdSList display display display'
                'crush crush crush display display display';
            grid-gap: 2px;
        }
    </style>
</head>

<body>
    <div class="page-container">
        <div class="header">
            <h1>Create a Character</h1>
        </div>
        <div class="general">
            <fieldset>
                <form id="charData">
                    <!-- input text is a single line text input field.  -->
                    <label for="charname">Name of Character:</label><br>
                    <input type="text" id="charname" name="charname"><br>

                    <!-- Radio input allows users to select only one of a list -->
                    <!-- The radio buttons are associated by having the same name. 
                        id is use to link the label to the button
                        value is what is passed when the form is submitted
                        checked will set that radio button as the default. 
                        If no button is selected, no value is passed on submission 
                    -->


                    <legend>Race of Character</legend>
                    <div>
                        <input type="radio" id="race1" name="charrace" value="Human" checked>
                        <label for="race1">Human</label><br>
                        <input type="radio" id="race2" name="charrace" value="Troll">
                        <label for="race2">Troll</label><br>
                        <input type="radio" id="race3" name="charrace" value="Centaur">
                        <label for="race3">Centaur</label><br>
                        <input type="radio" id="race4" name="charrace" value="Harpy">
                        <label for="race4">Harpy</label><br>
                        <input type="radio" id="race5" name="charrace" value="Naiad">
                        <label for="race5">Naiad</label>
                    </div>



                    <label for="age">Age (15-99):</label>
                    <input type="number" id="age" name="age" min="15" max="99">
                    <br>

                    <label for="gender">Gender:</label>
                    <input type="range" id="gender" name="gender" min="0" max="50">

                    <br>
                    <label for="favcolor">Select your favorite color:</label>
                    <input type="color" id="favcolor" name="favcolor"><br>
                    <label for="occupation">Occupation:</label><br>
                    <input type="text" id="occupation" name="occupation"><br><br>

                    <!-- textarea allows multiline text input. 
                        cols is the width of the box in characters
                        rows is the height of the box in rows
                        maxlength is the maximum number of characters -->
                    Description (250 chars)<br>
                    <textarea id="description" name="description" cols="50" rows="5" maxlength="250"
                        placeholder="Describe your ideal self"></textarea><br>

        </div>
        <!-- HERE WILL GO ALL THE RESULTS ONCE THE JAVASCRIPT TO DEAL WITH THE FORM IS DONE -->
        <div class="display" id="displayPanel">

        </div>
        <div class="skills-header">Skills</div>

        <div class="first-skill-list">
            <input type="checkbox" id="skill1" name="skill1" value="Swordplay">
            <label for="skill1">Swordplay</label><br>
            <input type="checkbox" id="skill2" name="skill2" value="Tumbling">
            <label for="skill2">Tumbling</label><br>
            <input type="checkbox" id="skill3" name="skill3" value="Oratory">
            <label for="skill3">Oratory</label><br>
            <input type="checkbox" id="skill4" name="skill4" value="Seduction">
            <label for="skill4">Seduction</label><br>
            <input type="checkbox" id="skill5" name="Skills" value="Cooking">
            <label for="Skill5">Cooking</label><br>
        </div>
        <div class="second-skill-list">
            <input type="checkbox" id="skill6" name="skill6" value="Algebra">
            <label for="skill6">Algebra</label><br>
            <input type="checkbox" id="skill7" name="Skill7" value="Set Trap">
            <label for="skill7">Set Trap</label><br>
            <input type="checkbox" id="skill8" name="Skill8" value="Detect Trap">
            <label for="skill8">Detect Trap</label><br>
            <input type="checkbox" id="skill9" name="Skill9" value="Jedi Mind Trick">
            <label for="skill9">Jedi Mind Trick</label><br>
            <input type="checkbox" id="skill10" name="Skill10" value="Doggeral">
            <label for="skill10">Doggeral</label><br>
        </div>
        <div class="third-skill-list">
            <input type="checkbox" id="skill11" name="Skill11" value="Moonwalking">
            <label for="skill11">Moonwalking</label><br>
            <input type="checkbox" id="skill12" name="Skill12" value="Cunning">
            <label for="skill12">Cunning</label><br>
            <input type="checkbox" id="skill13" name="Skill13" value="Linguistics">
            <label for="skill13">Linguistics</label><br>
            <input type="checkbox" id="skill14" name="Skill14" value="Axe Throwing">
            <label for="skill14">Axe Throwing</label><br>
            <input type="checkbox" id="skill15" name="Skill15" value="Caber Tossing">
            <label for="skill15">Caber Tossing</label><br>
        </div>
        <div class="crush">
            <label for="secret">Secret Crush:</label><br>
            <input type="password" id="secret" name="secret">
        </div>
        <br>
        <!-- This button will run the function getFormData when clicked -->
        <button id="createchar" onclick="getFormData(event)">Create Character</button>
        <!-- The submit button sends the form data to a page via the URL, which it can be interpreted by a server.
        In the form element, action="/action_page.php" will direct the form data to the URL /action_page.php, as a query string 
        We're using a different button because we're not sending information to a server. -->
        <!-- <input type="submit" value="Submit"> -->
        </form>
        </fieldset>
    </div>
    <script>
        function getFormData(event) {
            console.log("event: ", event);
            event.preventDefault();
            event.stopPropagation();
            let formData = document.querySelector("form");
            let formValue = new FormData(formData);
            console.log("formValue: ", formValue);
            // Here we will get the data entered by the user and associate it with variables. 

            let name = document.getElementById("charname").value;
            console.log("name: ", name);
            var race = "";
            // Radio values are individual, with the selected value being checked.
            // Collect them into an array using document.getElementsByName("NAME VALUE")
            // Iterate through the list, one will have the checked value set to "true"
            // Get the value from this index, and that is the value of the checked box.
            let chosenRace = document.getElementsByName("charrace");
            for (let i = 0; i < chosenRace.length; i++) {
                if (chosenRace[i].checked) {
                    race = chosenRace[i].value;
                    break;
                }
            }
            console.log("race: ", race);
            let age = document.getElementById("age").value;
            console.log("age: ", age);
            // This will return a numerical figure based on the slider. 
            let gender = document.getElementById("gender").value;
            console.log("gender: ", gender);

            // This returns the hexadecimal code of the color chosen.
            let favcolor = document.getElementById("favcolor").value;
            console.log("favcolor: ", favcolor);
            let occupation = document.getElementById("occupation").value;
            console.log("occupation: ", occupation);
            let description = document.getElementById("description").value;
            console.log("description: ", description);

            // Like radio input, checkbox input creates different values for each box.
            // For the radio we collected all the inputs by name, here we'll use the whole form.
            // The form includes ALL of the form data, not just keys and values (they are in 0 index)
            // We collect the skills by looking for keys that have "checked" as true
            // This will also incude radio inputs, so we have to eliminate those.

            console.log("forms: ", document.forms);
            let skills = document.forms[0];
            console.log("skills: ", skills);
            let skillsArray = [];
            for (let i = 0; i < skills.length; i++) {
                if (skills[i].checked && skills[i].name !== "charrace") {
                    skillsArray.push(skills[i].value);
                }
            }
            console.log("skillsArray: ", skillsArray);

            let crush = document.getElementById("secret").value;
            console.log("crush: ", crush);

            // **********************
            // Here we will dynamically display the information entered by the user. 
            // **********************

            let displayChar = document.getElementById("displayPanel");

            // This will display the characters name as a title, centered, and coloured with their chosen color.
            let titleDiv = document.createElement("div");
            titleDiv.style.textAlign = "center";
            let title = document.createElement("h1");
            title.style.color = favcolor;
            title.style.fontFamily = "fantasy";
            let nameText = document.createTextNode(name + " the " + occupation);
            title.appendChild(nameText);
            titleDiv.appendChild(title);
            displayChar.appendChild(titleDiv);

            // This will display race, age and gender. 

            // First, we convert gender from a number to a word
            // We're evaluating the condition "true". The first condition that matches will trigger the break condition.
            let genderPublish = "";
            console.log("gender: ", gender);
            switch (true) {
                case gender === 1:
                    genderPublish = "FemeNazi";
                    break;
                case gender < 5:
                    genderPublish = "Wonder Woman";
                    break;
                case gender < 10:
                    genderPublish = "Woman";
                    break;
                case gender < 15:
                    genderPublish = "Feminine";
                    break;
                case gender < 20:
                    genderPublish = "Xena";
                    break;
                case gender < 25:
                    genderPublish = "Non-binary";
                    break;
                case gender = 25:
                    genderPublish = "Intersex";
                    break;
                case gender < 29:
                    genderPublish = "Non-binary";
                    break;
                case gender = 30:
                    genderPublish = "Futanari";
                    break;
                case gender < 35:
                    genderPublish = "K-pop Boy Band";
                    break;
                case gender < 40:
                    genderPublish = "Macho";
                    break;
                case gender < 45:
                    genderPublish = "Man";
                    break;
                case gender < 50:
                    genderPublish = "Star Lord";
                    break;
                case gender === 50:
                    genderPublish = "Men's Rights Activist";
                    break;
            }
            console.log("genderPublish: ", genderPublish);

            // Create a grid to evenly space the data.
            // To centre things within each cell of the grid, use justifyItems
            // NOT justifyContent or textJustify.
            let featuresDiv = document.createElement("div");
            featuresDiv.style.display = "grid";
            featuresDiv.style.gridTemplateColumns = "1fr 1fr 1fr";
            featuresDiv.style.justifyItems = "center";

            // create divs for race, age, gender
            let raceDiv = document.createElement("div");;
            let raceText = document.createTextNode(race);
            raceDiv.appendChild(raceText);

            let ageDiv = document.createElement("div");
            let ageText = document.createTextNode(age + " years old");
            ageDiv.appendChild(ageText);

            let genderDiv = document.createElement("div");
            let genderText = document.createTextNode(genderPublish);
            genderDiv.appendChild(genderText);

            // Append these to the grid div
            featuresDiv.appendChild(raceDiv);
            featuresDiv.appendChild(ageDiv);
            featuresDiv.appendChild(genderDiv);

            // Append this to the main display div
            displayChar.appendChild(featuresDiv);

            // Create description display
            // In order to center the div, it has to be inside a div with display "flex"
            // Then justifyContent will work.
            // We would set displayChar to have display "flex", but this is precise. 
            let descriptionContainer = document.createElement("div");
            descriptionContainer.style.width = "100%";
            descriptionContainer.style.display = "flex";
            descriptionContainer.style.justifyContent = "center";
            // This will create the div that contains the text, with a border. 
            let descriptionDiv = document.createElement("div");
            descriptionDiv.style.borderStyle = "ridge";
            descriptionDiv.style.borderColor = favcolor;
            descriptionDiv.style.borderWidth = "thick";
            descriptionDiv.style.margin = "20px";
            descriptionDiv.style.width = "300px";
            // Adds the text from user input
            let descriptionText = document.createTextNode(description);
            // Append description display to character display, and other appends
            descriptionDiv.appendChild(descriptionText);
            descriptionContainer.appendChild(descriptionDiv);
            displayChar.appendChild(descriptionContainer);

            // Create Skills display
            // We'll create a list for the skillsArray created earlier. 
            // In order to justify the skills list so it is not completely left
            // it needs to be in a container which has display flex
            // We center the skills div in the container, and adjust its location 
            // in the panel using "width". 
            // don't forget to append everything appropriately....

            let skillsDivContainer = document.createElement("div");
            skillsDivContainer.style.display = "flex";
            skillsDivContainer.style.justifyContent = "center";
            let skillsDiv = document.createElement("div");
            skillsDiv.style.width = "60%";
            let skillsTitle = document.createElement("h3");
            let skillsTitleText = document.createTextNode("Skills");
            skillsTitle.appendChild(skillsTitleText);
            skillsDiv.appendChild(skillsTitle);

            let skillsList = document.createElement("ul");

            for (let i = 0; i < skillsArray.length; i++) {
                let skillShown = document.createElement("li");
                let skillShownText = document.createTextNode(skillsArray[i]);
                skillShown.appendChild(skillShownText);
                skillsList.appendChild(skillShown);
            }
            skillsDivContainer.appendChild(skillsDiv);
            skillsDiv.appendChild(skillsList);
            displayChar.appendChild(skillsDivContainer);

            // Add mail message from secret crush.
            // Change the attribute of the element

            // mailDivContainer will contain two subdivs, the mailHeader and mailBody
            let mailDivContainer = document.createElement("div");
            mailDivContainer.style.display = "flex";
            mailDivContainer.style.justifyContent = "center";
            mailDivContainer.style.width = "100%";
            mailDivContainer.style.padding = "10px";

            // mailHeader will contain subdivs mailImg1, mailTitle, mailImg2 
            // justifyContent positions content on the horizontal axis
            // alignContent positions content on the vertical axis
            // They both need display to be set to flex, or a variant. 
            // setting width may not do anything because the parent div has no width set.
            let mailHeader = document.createElement("div");
            mailHeader.style.display = "flex";
            mailHeader.style.justifyContent = "center";
            mailHeader.style.alignContent = "center";
            mailHeader.style.width = "100%";

            let mailTitle = document.createElement("h3");

            // Note: In an application you would do switch cases for the all the possessive endings. 
            let mailTitleText = document.createTextNode("  " + name + "'s Mail Box  ");
            mailTitle.appendChild(mailTitleText);

            let mailImg1 = document.createElement("img");
            mailImg1.setAttribute("src", "http://clipart-library.com/images_k/email-transparent-icon/email-transparent-icon-25.png");
            mailImg1.setAttribute("alt", "Mail Icon");
            mailImg1.setAttribute("width", "50px");

            let mailImg2 = document.createElement("img");
            mailImg2.setAttribute("src", "http://clipart-library.com/images_k/email-transparent-icon/email-transparent-icon-25.png");
            mailImg2.setAttribute("alt", "Mail Icon");
            mailImg2.setAttribute("width", "50px");

            mailHeader.appendChild(mailImg1);
            mailHeader.appendChild(mailTitle);
            mailHeader.appendChild(mailImg2);
            mailDivContainer.appendChild(mailHeader);

            let lineBreak = document.createElement("br");
            mailDivContainer.appendChild(lineBreak);

            mailBody = document.createElement("div");
            mailBody.style.width = "60%";

            let mailIcon = document.createElement("span");
            mailIcon.innerHTML = "&#9993;";
            let mailNotice = document.createElement("p");
            let mailNoticeText = document.createTextNode(" You have mail from " + crush);
            mailNotice.appendChild(mailIcon);
            mailNotice.appendChild(mailNoticeText);
            mailBody.appendChild(mailNotice);
            mailDivContainer.appendChild(mailBody);

            displayChar.appendChild(mailDivContainer);

            let request = new XMLHttpRequest();
            request.open("GET", "https://serpapi.com/playground?q=Apple&tbm=isch&ijn=0");
            request.send();
            request.onload = () => {
                console.log("request: ", request);
                if (request.status === 200) {
                    console.log(JSON.parse(request.response));
                } else {
                    console.log(`error ${request.status} ${request.statusText}`)
                }
            }

            var imgUrl = "";
            if (gender < 25 && race === "Human") {
                imgUrl = "/woman.jpg";
            } else if (gender >= 25 && race === "Human") {
                imgUrl = "/man.jpg"
            } else if (gender < 25 && race === "Centaur") {
                imgUrl = "/centaurWoman.jpg";
            } else if (gender >= 25 && race === "Centaur") {
                imgUrl = "/centaurMan.jpg";
            } else if (gender <= 25 && race === "Harpy") {
                imgUrl = "/harpywoman.jpg";
            } else if (gender > 25 && race === "Harpy") {
                imgUrl = "/harpyman.jpg";
            } else if (race === "Troll") {
                imgUrl = "/troll.jpg";
            } else if (race === "Naiad") {
                imgUrl = "/naiad.jpg";
            }





        }
    </script>
</body>

</html>